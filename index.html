<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChetasVault Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.24.7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css">
    <style>
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .slide-in { animation: slideIn 0.5s ease-out forwards; }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .preview-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .preview-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5); }
        .neon-glow { box-shadow: 0 0 10px rgba(74, 158, 255, 0.8), 0 0 20px rgba(74, 158, 255, 0.4); }
    </style>
</head>
<body class="min-h-screen transition-colors duration-300" id="theme-body">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const ChetasVaultDashboard = () => {
            const [files, setFiles] = useState([]);
            const [filter, setFilter] = useState('All Files');
            const [sortBy, setSortBy] = useState('Name');
            const [sortOrder, setSortOrder] = useState('Ascending');
            const [theme, setTheme] = useState('dark');
            const [hoveredFile, setHoveredFile] = useState(null);

            // Mock file_metadata.json data (replace with actual fetch in production)
            const fileData = [
                {
                    "filename": "AI Compute Hardware- Deep Dive Comparison.html",
                    "url": "https://yourusername.github.io/OBDistGit/AI Compute Hardware- Deep Dive Comparison.html",
                    "category": "AI",
                    "creation_time": "2025-07-03T07:45:51.259744",
                    "modified_time": "2025-07-03T07:45:51.277145",
                    "time_diff_hours": 0.0,
                    "file_size": "AI Compute Hardware Deep Dive Comparison...",
                    "summary": "Untitled 14 AI Compute Hardware Deep Dive Comparison...",
                    "file_type": "html"
                },
                // Add other files here (omitted for brevity)
            ];

            useEffect(() => {
                // In production, fetch file_metadata.json
                // fetch('/file_metadata.json').then(res => res.json()).then(data => setFiles(data));
                setFiles(fileData);
            }, []);

            const getIcon = (file_type, category) => {
                if (file_type === 'html') return 'üìÑ';
                if (category === 'Aegis') return 'üõ°Ô∏è';
                if (category === 'RAG') return 'üîç';
                if (category === 'AI') return 'ü§ñ';
                return 'üìú';
            };

            const filteredFiles = filter === 'All Files' ? files : files.filter(file => file.category === filter);
            const sortedFiles = [...filteredFiles].sort((a, b) => {
                const order = sortOrder === 'Ascending' ? 1 : -1;
                if (sortBy === 'Name') return order * a.filename.localeCompare(b.filename);
                if (sortBy === 'Date') return order * (new Date(a.creation_time) - new Date(b.creation_time));
                if (sortBy === 'Size') return order * (a.file_size.length - b.file_size.length);
                if (sortBy === 'Type') return order * a.file_type.localeCompare(b.file_type);
                return 0;
            });

            const toggleTheme = () => {
                const newTheme = theme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
                document.getElementById('theme-body').className = `min-h-screen transition-colors duration-300 ${newTheme === 'dark' ? 'bg-gray-900 text-gray-300' : 'bg-gray-100 text-gray-900'}`;
            };

            return (
                <div className={`container mx-auto p-6 ${theme === 'dark' ? 'bg-gray-900 text-gray-300' : 'bg-gray-100 text-gray-900'}`}>
                    {/* Header */}
                    <header className="text-center mb-12">
                        <div className="flex justify-between items-center">
                            <div className="flex items-center space-x-2">
                                {[...Array(6)].map((_, i) => <span key={i} className="text-2xl">üêæ</span>)}
                            </div>
                            <div>
                                <label className="mr-2">üåà Theme</label>
                                <select onChange={toggleTheme} value={theme} className="bg-gray-800 text-white rounded px-2 py-1">
                                    <option value="dark">Dark</option>
                                    <option value="light">Light</option>
                                </select>
                            </div>
                        </div>
                        <h1 className="text-5xl font-light mt-4 text-white neon-glow">üêï ChetasVault üêæ</h1>
                        <p className="text-xl italic opacity-80">Catahoula's Synthwave Content Portal</p>
                    </header>

                    {/* Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
                        <div className="bg-gray-800 p-6 rounded-lg slide-in">
                            <p className="text-3xl font-bold">{files.length}</p>
                            <p>Total Files</p>
                        </div>
                        <div className="bg-gray-800 p-6 rounded-lg slide-in" style={{ animationDelay: '0.2s' }}>
                            <p className="text-3xl font-bold">{(files.reduce((sum, file) => sum + file.file_size.length, 0) / 1024).toFixed(0)}KB</p>
                            <p>Total Size</p>
                        </div>
                        <div className="bg-gray-800 p-6 rounded-lg slide-in" style={{ animationDelay: '0.4s' }}>
                            <p className="text-3xl font-bold">Jul 3</p>
                            <p>Last Updated</p>
                        </div>
                        <div className="bg-gray-800 p-6 rounded-lg slide-in" style={{ animationDelay: '0.6s' }}>
                            <p className="text-3xl font-bold">18</p>
                            <p>Avg Read Time</p>
                        </div>
                    </div>

                    {/* Filters and Sorting */}
                    <div className="flex flex-wrap gap-4 mb-8">
                        {['All Files', 'Aegis', 'RAG', 'AI', 'Mathematics', 'Security', 'Hardware', 'Other'].map(category => (
                            <button
                                key={category}
                                onClick={() => setFilter(category)}
                                className={`px-4 py-2 rounded ${filter === category ? 'bg-blue-500 text-white' : 'bg-gray-700 hover:bg-gray-600'}`}
                            >
                                {category}
                            </button>
                        ))}
                    </div>
                    <div className="flex flex-wrap gap-4 mb-12">
                        {['Name', 'Date', 'Size', 'Type'].map(sort => (
                            <button
                                key={sort}
                                onClick={() => setSortBy(sort)}
                                className={`px-4 py-2 rounded ${sortBy === sort ? 'bg-blue-500 text-white' : 'bg-gray-700 hover:bg-gray-600'}`}
                            >
                                Sort by {sort}
                            </button>
                        ))}
                        <button
                            onClick={() => setSortOrder(sortOrder === 'Ascending' ? 'Descending' : 'Ascending')}
                            className="px-4 py-2 rounded bg-gray-700 hover:bg-gray-600"
                        >
                            {sortOrder}
                        </button>
                    </div>

                    {/* File List */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {sortedFiles.map((file, index) => (
                            <div
                                key={file.filename}
                                className="relative bg-gray-800 p-6 rounded-lg slide-in preview-card"
                                style={{ animationDelay: `${index * 0.1}s` }}
                                onMouseEnter={() => setHoveredFile(file.filename)}
                                onMouseLeave={() => setHoveredFile(null)}
                            >
                                <a href={file.url} target="_blank" className="flex items-center space-x-3">
                                    <span className="text-2xl">{getIcon(file.file_type, file.category)}</span>
                                    <span className="font-semibold text-blue-400 hover:underline">{file.filename}</span>
                                </a>
                                {hoveredFile === file.filename && (
                                    <div className="absolute z-10 bg-gray-900 p-4 rounded-lg mt-2 w-full md:w-96 shadow-lg fade-in">
                                        <p className="text-sm italic">{file.summary}</p>
                                        <div className="mt-2 text-sm">
                                            <p><strong>Category:</strong> {file.category}</p>
                                            <p><strong>Created:</strong> {new Date(file.creation_time).toLocaleDateString()}</p>
                                            <p><strong>Modified:</strong> {new Date(file.modified_time).toLocaleDateString()}</p>
                                            <p><strong>Size:</strong> {(file.file_size.length / 1024).toFixed(2)} KB</p>
                                            <p><strong>Type:</strong> {file.file_type}</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ChetasVaultDashboard />, document.getElementById('root'));
    </script>
</body>
</html>